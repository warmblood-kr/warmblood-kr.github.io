---
layout: post
title: "[WIP] 오래된 미래 htmx. SPA의 새로운 대안"
date: 2024-01-08 21:50:00 +0900
categories: htmx frontend web
author: jeongsoo.park
---
웜블러드에서는 React나 VueJS 같은 단일 페이지 구동(SPA) 기반 웹프론트엔드 기술을 사용하지 않습니다. 그 이야기를 좀 해보죠.

## 요즘 웹개발의 트렌드가 과연 최선일까?

요즘의 웹개발은 대개, SPA 형태의 프론트엔드와 API 서버 역할의 백엔드로 구분되어 진행됩니다. 저는 지난 10여년간 여러 개발팀들을 이끌어오며 여러 문제들을 겪으면서, 이런 구조가 과연 효과적인가 하는 고민을 해왔습니다.

* 백엔드 파트는 API를 만들고 swagger로 그것을 문서화하고, 프론트엔드 파트는 문서를 보고 API를 가져다가 화면을 만드는데 사용합니다.
* 백엔드에서는 데이터를 JSON으로 직렬화하고, 프론트엔드에서는 JSON을 역직렬화합니다. 단순한 JSON 타입을 그대로 쓰지 않고 클래스로 맵핑하려면, 백엔드, 프론트엔드 각각이 직렬화/역직렬화 장치를 마련해야 합니다.
* 백엔드가 만들어둔 API가 프론트엔드에서 사용하기 적절하지 않거나 미진한 경우도 있고, 벡엔드가 만들어둔 용도와 다르게 사용하는 경우도 종종 발생합니다.
* API를 잘 사용하기 위해서는 문서를 풍부하게 만들어야 하는데, 그러다보면 개발이 느려질 수 있습니다. 또, API 변경이 발생하면 문서도 함께 업데이트해줘야 합니다.
* 백엔드와 프론트엔드가 서로 속도도 다르고 업무하는 시기도 다릅니다. 프론트엔드는 이미 동작하는 API가 나와있어야 개발을 완료할 수 있습니다. 개발 시기가 달라도 개발을 할 수 있도록 API 명세를 먼저 만들어두고 그 규약에 맞춰서 개발하기도 합니다. 하지만 실제로 화면을 동작시키다보면 명세에서 부족한 것들이 나오게 마련입니다. 상대 파트에 수정 요청을 하면, 지금 하는 작업을 어느 정도 마무리하고 해주겠다고 합니다.

여러분도 이런 상황을 겪어보셨을겁니다.

웜블러드에 합류하고 회사에서 유일한 웹개발자로 혼자서 웹사이트를 만들려니, 프론트엔드 따로 백엔드 따로 만들면서 속도를 내기는 어려워보였습니다.

가만히 생각해보면, 딜매치 같은 서비스는 굳이 SPA로 개발할 필요가 없습니다. Google Docs나 Notion처럼 사용자 상호작용이 긴밀한 웹애플리케이션과는 달리, 딜매치는 웹페이지의 성격이 강합니다. 과장을 좀 보태서 말하자면, 초기 버전의 딜매치는 워드프레스로 만들 수도 있었죠.

그래서, 그 옛날 PHP와 같은 방식의, 멋있게 말하자면 Web 1.0 방식으로 웹개발을 시작했습니다. Single-Page Application (SPA) 이전에는 Multi-Page Application (MPA)이 있었죠.

하지만 그 방식에는 한 가지 치명적인 약점이 있었는데, 페이지를 이동할 때마다 HTML 문서 전체를 새로 로딩하기 때문에 화면이 깜빡거리는 것 같은 현상이 발생한다는겁니다. 그리고 POST가 필요한 동작들은 별도의 페이지로 구성하게 된다는 문제도 있었습니다. 물론 JS나 Ajax를 써서 한 화면에도 모달창 등을 통해 동작하도록 구현할 수는 있겠지만요.


## 다른 방법이 있을까?

예전에 리서치를 하다가 트위터상에서 열띤 토론 하나를 보았습니다. Ruby on Rails를 만든 DHH가, Hotwire라는 기술을 열심히 홍보하고 있었죠. 

문득 그 기억이 났습니다. Hotwire는 Ruby의 기술이었기 때문에 Python을 사용하는 저에게는 고려 대상이 아니었고, 언어 중립적인 htmx라는 기술을 발견했습니다. 그리고 그들의 철학이 담겨있는 Hypermedia.system 책을 읽고 그 단순하면서도 풍부한 기술에 매료되었죠.

[TBD]
