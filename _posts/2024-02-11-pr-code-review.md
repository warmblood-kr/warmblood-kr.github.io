---
layout: post
title: "[WIP] 좀 더 효과적인 코드 리뷰를 향하여"
date: 2024-02-11 18:48:00 +0900
categories: dev-practice
author: jeongsoo.park
summary: 채용 면접을 하면서 '코드 리뷰를 하나요?'질문을 종종 받습니다. 코드 리뷰에 대한 오해와 단상들을 풀어봅니다.
---
채용 면접을 하면서 많이 받는 질문 중 하나가, '개발 문화가 어떻게 되나요?'입니다. 더 자세하게 말해달라고 하면, '`코드 리뷰`는 하는지, `TDD`나 `테스트케이스`는 작성하는지'를 궁금해하십니다. 그리고 더 대화를 나눠보면, 많은 분들이 좋은 개발 실천법에 대한 동경이나 환상, 그리고 본인이 그것을 실천하고 있지 못하는 데에 대한 죄책감이나 부담감을 가지고 있는 것을 느낍니다. 아무래도 저희 포지션에 지원하시는 2~4년차 사이의 분들이 겪는 과정인 것 같습니다.

오늘은 지난번에 다뤘던 [TDD]({{ site.baseurl }}{% link _posts/2024-02-10-tdd.md %}) 못지 않게 많이 질문하시는 코드 리뷰에 대한 이야기를 해볼까 합니다.

오늘날 소위 코드 리뷰라고 하면 떠올리는 모습은 이럴겁니다. 기능 브랜치를 따서 개발을 진행하다가, 개발이 완료되면 GitHub의 Pull Request (PR)를 발행합니다. 리뷰어들이 PR에 댓글을 달면서 논의를 진행하다가 합의에 이르면 merge하여 본 브랜치에 병합합니다.

하지만 현실에서도 이렇게 단순하게 잘 작동할까요?


## 현실에서의 PR 리뷰

면접자분들과 이야기를 나누며 서로 많이 공감하던 현실의 PR 리뷰의 모습은 이렇습니다.

자신이 맡은 개발 부분이 완료되면 PR 리뷰를 발행합니다. 주로 시니어 개발자분들이 PR 리뷰의 역할을 담당하곤 합니다. 물론 다른 동료분들도 리뷰를 하긴 하지만, 최종 승인은 중급 내지는 시니어 개발자분들이 하곤 합니다. 그리고 그 수는 상대적으로 적습니다. 때문에 리뷰를 제출하고 코드가 머지되기까지는 시간이 좀 걸립니다. 며칠씩 걸리기도 합니다. 너무 오래 걸리는 경우에는 리뷰 요청을 재차 하기도 합니다.

반대로 리뷰를 하는 사람은 어떨까요? 본인이 맡은 일도 있는데 리뷰는 몰려들고 쌓여갑니다. 좋아요. 마음 먹고 리뷰를 해봅니다. PR을 열었는데, 무슨 작업인지부터 이해를 해야겠습니다. 그래야 왜 가능한 여러가지 구조나 설계 중에서 왜 구현 방식을 택했는지 판단이 될테니까요. 기획 내용을 간략히 파악합니다. 좋아, 어떤 배경에서 작성된 코드인지는 이해가 됐습니다. 하지만 이미 이 구조를 선택해서 구현이 완료되어버린 지금 시점에서 근본적인 질문을 하기란 부담이 됩니다. 처음부터 다시 작성하라고 하는 셈이 될 수도 있으니까요. 그래서, 아주 표면적인 코드 내용 정도만 리뷰하게 됩니다. 처음에는 용기와 사명감을 가지고 적극적으로 리뷰를 했더라도, 미묘한 신경전을 몇 번 겪고, 검토해야 할 PR 요청건들이 쌓여가면 점점 소극적이 되기 십상입니다.

개발을 한 사람은 이러한 사정을 이해하기도 하지만, 본인이 작성한 코드가 통합되어 실제로 제품에 미치는 영향을 경험하기까지는 시간이 걸립니다. 기다리고 있을 수는 없으니 다음 작업을 시작합니다. 그러다가 리뷰가 오면 대응을 합니다.

전반적으로 PR 리뷰는 걸림돌이 되어가고, 개발 속도가 느려지고 리듬감이 줄어듭니다.

여러분은 어떤가요? 이런 상황들을 경험하셨나요?


## PR 리뷰의 대안

Kent Beck이 [PR에 관한 트윗](https://twitter.com/kentbeck/status/1375936309458464769) 하나를 올린 적이 있습니다.

> “Pull requests are an improvement on working alone but not on working together”

그는 위와 같은 인용과 함께 [Those pesky pull request reviews](https://jessitron.com/2021/03/27/those-pesky-pull-request-reviews/)라는 글을 링크했습니다.



[From Async Code Reviews to Co-Creation Patterns](https://www.infoq.com/articles/co-creation-patterns-software-development/)
