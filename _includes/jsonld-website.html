{%- comment -%}
JSON-LD structured data for website organization and structure
Provides comprehensive website metadata for NLWeb integration
{%- endcomment -%}

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "Organization",
      "@id": "{{ site.url }}/#organization",
      "name": "{{ site.title }}",
      "url": "{{ site.url }}",
      "description": "{{ site.description }}",
      "contactPoint": {
        "@type": "ContactPoint",
        "email": "{{ site.email }}",
        "contactType": "customer service"
      },
      "sameAs": [
        "https://github.com/{{ site.github_username }}"
      ]
    },
    {
      "@type": "WebSite",
      "@id": "{{ site.url }}/#website",
      "url": "{{ site.url }}",
      "name": "{{ site.title }}",
      "description": "{{ site.description }}",
      "inLanguage": "{{ site.lang | default: 'ko' }}",
      "publisher": {
        "@id": "{{ site.url }}/#organization"
      },
      "potentialAction": {
        "@type": "SearchAction",
        "target": {
          "@type": "EntryPoint",
          "urlTemplate": "{{ site.url }}/search?q={search_term_string}"
        },
        "query-input": "required name=search_term_string"
      }
    },
    {
      "@type": "Blog",
      "@id": "{{ site.url }}/#blog",
      "url": "{{ site.url }}",
      "name": "{{ site.title }}",
      "description": "{{ site.description }}",
      "inLanguage": "{{ site.lang | default: 'ko' }}",
      "publisher": {
        "@id": "{{ site.url }}/#organization"
      },
      "blogPost": [
        {%- for post in site.posts limit: 10 -%}
        {
          "@type": "BlogPosting",
          "@id": "{{ post.url | absolute_url }}",
          "headline": "{{ post.title | escape | jsonify }}",
          "url": "{{ post.url | absolute_url }}",
          "datePublished": "{{ post.date | date_to_xmlschema }}",
          "author": {
            "@type": "Person",
            "name": "{{ post.author | default: site.author }}"
          }
        }{% unless forloop.last %},{% endunless %}
        {%- endfor -%}
      ]
    }
  ]
}
</script>