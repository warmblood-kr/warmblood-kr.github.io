// Enhanced Syntax Highlighting for Warmblood TechBlog
// Modern code highlighting with better readability

// Base code block styling
.highlight {
  background: $gray-900;
  border-radius: $radius-lg;
  padding: $spacing-lg;
  margin: $spacing-lg 0;
  overflow-x: auto;
  position: relative;
  box-shadow: $shadow-md;

  // Scrollbar styling
  &::-webkit-scrollbar {
    height: 8px;
  }

  &::-webkit-scrollbar-track {
    background: rgba($gray-700, 0.3);
    border-radius: 4px;
  }

  &::-webkit-scrollbar-thumb {
    background: rgba($gray-500, 0.6);
    border-radius: 4px;

    &:hover {
      background: rgba($gray-400, 0.8);
    }
  }

  pre {
    margin: 0;
    padding: 0;
    background: none;
    border-radius: 0;
    overflow: visible;
  }

  code {
    background: none;
    padding: 0;
    border-radius: 0;
    color: $gray-100;
    font-family: 'SFMono-Regular', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
    font-size: $font-size-sm;
    line-height: 1.6;
  }
}

// Inline code styling
:not(pre) > code {
  background: rgba($primary-red, 0.1);
  color: $primary-red-dark;
  padding: 2px 6px;
  border-radius: $radius-sm;
  font-size: 0.9em;
  font-family: 'SFMono-Regular', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
}

// Language label
.highlight::before {
  content: attr(data-lang);
  position: absolute;
  top: $spacing-sm;
  right: $spacing-md;
  background: rgba($gray-700, 0.8);
  color: $gray-300;
  padding: $spacing-xs $spacing-sm;
  border-radius: $radius-sm;
  font-size: $font-size-xs;
  font-weight: $font-weight-medium;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

// Rouge syntax highlighting tokens
.highlight {
  // Comments
  .c,    // Comment
  .cm,   // Comment.Multiline
  .cp,   // Comment.Preproc
  .c1,   // Comment.Single
  .cs    // Comment.Special
  {
    color: #6b7280; // gray-500
    font-style: italic;
  }

  // Keywords
  .k,    // Keyword
  .kc,   // Keyword.Constant
  .kd,   // Keyword.Declaration
  .kn,   // Keyword.Namespace
  .kp,   // Keyword.Pseudo
  .kr,   // Keyword.Reserved
  .kt    // Keyword.Type
  {
    color: #f472b6; // pink-400
    font-weight: $font-weight-medium;
  }

  // Names and Variables
  .n,    // Name
  .na,   // Name.Attribute
  .nb,   // Name.Builtin
  .nc,   // Name.Class
  .no,   // Name.Constant
  .nd,   // Name.Decorator
  .ni,   // Name.Entity
  .ne,   // Name.Exception
  .nf,   // Name.Function
  .nl,   // Name.Label
  .nn,   // Name.Namespace
  .nx,   // Name.Other
  .py,   // Name.Property
  .nt,   // Name.Tag
  .nv,   // Name.Variable
  .vc,   // Name.Variable.Class
  .vg,   // Name.Variable.Global
  .vi    // Name.Variable.Instance
  {
    color: #e5e7eb; // gray-200
  }

  // Functions
  .nf {
    color: #60a5fa; // blue-400
  }

  // Classes
  .nc {
    color: #34d399; // emerald-400
  }

  // Strings
  .s,    // String
  .sa,   // String.Affix
  .sb,   // String.Backtick
  .sc,   // String.Char
  .dl,   // String.Delimiter
  .sd,   // String.Doc
  .s2,   // String.Double
  .se,   // String.Escape
  .sh,   // String.Heredoc
  .si,   // String.Interpol
  .sx,   // String.Other
  .sr,   // String.Regex
  .s1,   // String.Single
  .ss    // String.Symbol
  {
    color: #fbbf24; // amber-400
  }

  // Numbers
  .m,    // Number
  .mb,   // Number.Bin
  .mf,   // Number.Float
  .mh,   // Number.Hex
  .mi,   // Number.Integer
  .il,   // Number.Integer.Long
  .mo    // Number.Oct
  {
    color: #fb7185; // rose-400
  }

  // Operators
  .o,    // Operator
  .ow    // Operator.Word
  {
    color: #a78bfa; // violet-400
  }

  // Punctuation
  .p {
    color: #9ca3af; // gray-400
  }

  // Generics/Types
  .gh,   // Generic.Heading
  .gu,   // Generic.Subheading
  .gd,   // Generic.Deleted
  .gi    // Generic.Inserted
  {
    color: #10b981; // emerald-500
  }

  // Error highlighting
  .gr,   // Generic.Error
  .gt    // Generic.Traceback
  {
    color: #ef4444; // red-500
    background-color: rgba(#ef4444, 0.1);
    padding: 2px 4px;
    border-radius: $radius-sm;
  }

  // Line numbers (if using Rouge with line numbers)
  .lineno {
    color: $gray-500;
    user-select: none;
    padding-right: $spacing-md;
    margin-right: $spacing-md;
    border-right: 1px solid $gray-700;
  }
}

// Language-specific adjustments
.highlight.language-javascript,
.highlight.language-js {
  .nx {
    color: #60a5fa; // blue-400 for JS variables
  }
}

.highlight.language-python {
  .bp {
    color: #a78bfa; // violet-400 for Python builtins
  }
}

.highlight.language-css {
  .nd {
    color: #34d399; // emerald-400 for CSS selectors
  }

  .nt {
    color: #f472b6; // pink-400 for CSS tags
  }
}

.highlight.language-html {
  .nt {
    color: #f472b6; // pink-400 for HTML tags
  }

  .na {
    color: #60a5fa; // blue-400 for HTML attributes
  }
}

// Code block with filename
.code-with-filename {
  position: relative;
  margin: $spacing-lg 0;

  .filename {
    background: $gray-800;
    color: $gray-300;
    padding: $spacing-sm $spacing-lg;
    border-radius: $radius-lg $radius-lg 0 0;
    font-size: $font-size-sm;
    font-family: 'SFMono-Regular', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
    border-bottom: 1px solid $gray-700;

    &::before {
      content: "üìÅ ";
      margin-right: $spacing-xs;
    }
  }

  .highlight {
    margin: 0;
    border-radius: 0 0 $radius-lg $radius-lg;
  }
}